<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertilizer Prediction Form</title>
    <link rel="stylesheet" href="assets/css/style_disc.css">
</head>
<body>
    <div class="theme-toggle">
        <label class="switch">
            <input type="checkbox" id="toggleTheme">
            <span class="slider"></span>
        </label>
    </div>

    <div class="form-container">
        <img src="assets/img/logo.jpg" alt="Agroww Logo" class="logo">
        
        <div class="form-content">
            <h2>Sign In for Fertilizer Prediction</h2>
            <form id="weatherForm">
                <div class="input-group">
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" name="city" placeholder="Enter your city" required>
                        <input type="submit" value="Get Weather">
                    </div>
                    <div class="form-group" id="result">
                        <label for="temperature">Temperature (Â°C)</label>
                        <input type="number" id="temperature" class="weather-input" name="temperature" placeholder="Enter temperature" required readonly>
                    </div>
                    <div class="form-group" id="result">
                        <label for="humidity">Humidity (%)</label>
                        <input type="number" id="humidity" name="humidity" class="weather-input" placeholder="Enter humidity" required readonly>
                    </div>
                    <div class="form-group">
                        <label for="soil-type">Soil Type</label>
                        <select id="soil-type" name="soil-type" required>
                            <option value="">Select Soil Type</option>
                            <option value="Black">Black</option>
                            <option value="Clayey">Clayey</option>
                            <option value="Loamy">Loamy</option>
                            <option value="Red">Red</option>
                            <option value="Sandy">Sandy</option>
                        </select>
                    </div>
                </div>
                <div class="input-group">
                    <div class="form-group">
                        <label for="crop-type">Crop Type</label>
                        <select id="crop-type" name="crop-type" required>
                            <option value="">Select Crop Type</option>
                            <option value="Barley">Barley</option>
                            <option value="Cotton">Cotton</option>
                            <option value="Ground Nuts">Ground Nuts</option>
                            <option value="Maize">Maize</option>
                            <option value="Millets">Millets</option>
                            <option value="Oil Seeds">Oil Seeds</option>
                            <option value="Paddy">Paddy</option>
                            <option value="Pulses">Pulses</option>
                            <option value="Sugarcane">Sugarcane</option>
                            <option value="Tobacco">Tobacco</option>
                            <option value="Wheat">Wheat</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="nitrogen">Nitrogen (%)</label>
                        <input type="number" id="nitrogen" name="nitrogen" placeholder="Enter nitrogen level" required>
                    </div>
                    <div class="form-group">
                        <label for="potassium">Potassium (%)</label>
                        <input type="number" id="potassium" name="potassium" placeholder="Enter potassium level" required>
                    </div>
                    <div class="form-group">
                        <label for="phosphorus">Phosphorus (%)</label>
                        <input type="number" id="phosphorus" name="phosphorus" placeholder="Enter phosphorus level" required>
                    </div>
                </div>
                <div class="button-group">
                    <button type="submit" class="predict-btn">Predict Fertilizers</button>
                    <button type="button" class="back-btn" onclick="history.back()">Go Back</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const toggleThemeButton = document.getElementById('toggleTheme');
        const body = document.body;

        toggleThemeButton.addEventListener('change', () => {
            body.classList.toggle('dark-mode');
        });
    </script>
    <script>
        const form = document.getElementById('weatherForm');
        const tempInput = document.getElementById('temperature');
        const humidityInput = document.getElementById('humidity');

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            const city = document.getElementById('city').value;
            getWeather(city);
        });

        async function getWeather(city) {
            const apiKey = 'fdfad914d777f9b0a23e4dac14748801'; // Your API key
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('City not found');
                }

                const data = await response.json();
                const temperature = data.main.temp;
                const humidity = data.main.humidity;

                // Populate the input fields with the weather data
                tempInput.value = temperature;
                humidityInput.value = humidity;

            } catch (error) {
                alert(error.message);
                tempInput.value = '';  // Clear the input field on error
                humidityInput.value = '';  // Clear the input field on error
            }
        }
    </script>
</body>
</html>
